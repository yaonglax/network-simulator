# NAT и трансляция адресов

<h2 id="nat-why">Зачем нужен NAT?</h2><p>NAT (Network Address Translation) — это технология трансляции сетевых адресов, позволяющая множеству устройств использовать один публичный IP-адрес для выхода в интернет.</p><div style="position: relative; display: flex; justify-content: center; flex-direction: column; align-items: center; margin: 20px 0;"> <img width="70%" src="/theory/nat-principle.png" style="border-radius: 0.5rem;" /> <div class='note'> NAT решает проблему нехватки IPv4-адресов, позволяя целой локальной сети работать через один публичный IP. <img src="./cat4.svg" style="position: absolute; bottom: 0; right: 0; translate: 50% 50%; transform: rotate(30deg); width: 120px;"> </div> </div><h3>Основные задачи NAT:</h3> <ul> <li><strong>Экономия публичных IPv4-адресов</strong> - сотни устройств за одним IP</li> <li><strong>Безопасность</strong> - скрытие внутренней структуры сети</li> <li><strong>Гибкость</strong> - простая замена провайдера без смены внутренних адресов</li> <li><strong>Совместимость</strong> - работа разных сетей с пересекающимися адресами</li> </ul><h2 id="nat-types">Типы NAT (Static, Dynamic, PAT)</h2><div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0;"> <div style="border: 1px solid var(--detail-gray); border-radius: 0.5rem; padding: 15px;"> <h3 style="margin-top: 0;">Static NAT</h3> <ul> <li>Постоянное 1:1 соответствие адресов</li> <li>Используется для серверов в локальной сети</li> <li>Пример: веб-сервер 192.168.1.100 → 93.184.216.34</li> </ul> </div> <div style="border: 1px solid var(--detail-gray); border-radius: 0.5rem; padding: 15px;"> <h3 style="margin-top: 0;">Dynamic NAT</h3> <ul> <li>Пул публичных адресов для группы устройств</li> <li>Автоматическое выделение адреса при необходимости</li> <li>Не сохраняет соответствие после завершения сессии</li> </ul> </div> <div style="border: 1px solid var(--detail-gray); border-radius: 0.5rem; padding: 15px;"> <h3 style="margin-top: 0;">PAT (NAT Overload)</h3> <ul> <li>Один публичный IP для всех устройств</li> <li>Использует номера портов для идентификации</li> <li>Самый распространенный тип в домашних роутерах</li> </ul> </div> </div><div style="position: relative; display: flex; justify-content: center; flex-direction: column; align-items: center; margin: 20px 0;"> <img src="/theory/nat-types.png" style="width: 80%; border-radius: 0.5rem;"> <div class="note"> <strong>PAT (Port Address Translation)</strong> - самый экономичный вариант, позволяющий тысячам соединений использовать один IP через уникальные комбинации IP:порт. <img src="./cat4.svg" style="position: absolute; bottom: 0; right: 0; translate: 50% 50%; transform: rotate(30deg); width: 120px;"> </div> </div><h2 id="nat-home">NAT в домашних роутерах</h2><table> <thead> <tr> <th>Характеристика</th> <th>Как работает</th> <th>Пример</th> </tr> </thead> <tbody> <tr> <td><strong>Входящие соединения</strong></td> <td>Блокируются по умолчанию (без проброса портов)</td> <td>Для игрового сервера нужен port forwarding</td> </tr> <tr> <td><strong>Исходящие соединения</strong></td> <td>Автоматическая трансляция с заменой портов</td> <td>192.168.1.10:54321 → 93.184.216.34:54321</td> </tr> <tr> <td><strong>NAT Table</strong></td> <td>Хранит соответствия внутренних и внешних адресов</td> <td>Обычно 1000-4000 записей</td> </tr> <tr> <td><strong>UPnP</strong></td> <td>Автоматический проброс портов для приложений</td> <td>Используют игры и VoIP-приложения</td> </tr> </tbody> </table><div style="position: relative; display: flex; justify-content: center; flex-direction: column; align-items: center; margin: 20px 0;"> <div class="note warning"> <strong>Типы NAT в играх:</strong><br> - Open: полная доступность извне<br> - Moderate: ограниченная доступность<br> - Strict: только исходящие соединения<br> Проблемы с multiplayer-играми часто связаны с типом NAT. <img src="./cat4.svg" style="position: absolute; bottom: 0; right: 0; translate: 50% 50%; transform: rotate(30deg); width: 120px;"> </div> </div><style> table { width: 100%; border-collapse: collapse; margin: 15px 0; } th, td { padding: 12px 15px; border: 1px solid var(--detail-gray); text-align: left; } th { background-color: var(--element-gray); font-weight: bold; } tr:nth-child(even) { background-color: var(--element-gray); } .note { border-left: 4px solid var(--highlight-purple); background-color: var(--element-gray); width: 80%; min-height: 60px; border-radius: 0.5rem; padding: 15px; position: relative; margin-top: 15px; } .note.warning { border-left-color: var(--warning-orange); } @media (max-width: 768px) { .grid-container { grid-template-columns: 1fr; } .illustration img, .note { width: 95%; } } </style>
