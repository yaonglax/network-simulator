# Старение MAC-таблицы в коммутаторах

<h2 id="mac-aging-why">Зачем нужно старение записей?</h2><p>Старение записей в MAC-таблице — это автоматический процесс удаления устаревших записей, который поддерживает актуальность таблицы коммутации и эффективную работу сети.</p><div style="position: relative; display: flex; justify-content: center; flex-direction: column; align-items: center; margin: 20px 0;"> <img width="60%" src="/theory/mac-aging-process.png" style="border-radius: 0.5rem;" /> <div class='note'> Без механизма старения MAC-таблица быстро переполнилась бы устаревшими записями, что привело бы к неэффективной работе коммутатора и избыточному flooding-трафику. <img src="/cat4.svg" style="position: absolute; bottom: 0; right: 0; translate: 50% 50%; transform: rotate(30deg); width: 120px;"> </div> </div><h3>Основные причины старения записей:</h3> <ul> <li>Освобождение места для новых MAC-адресов</li> <li>Учет перемещения устройств между портами</li> <li>Предотвращение использования устаревшей информации</li> <li>Оптимизация производительности коммутатора</li> </ul><h2 id="mac-aging-time">Время жизни записи (aging time)</h2><p>Aging time — это период времени, в течение которого запись остается в MAC-таблице без обновления, прежде чем будет удалена.</p><div style="display: flex; gap: 20px; margin: 20px 0;"> <div style="flex: 1; border: 1px solid var(--detail-gray); border-radius: 0.5rem; padding: 15px;"> <h3 style="margin-top: 0;">Типичные значения</h3> <ul> <li><strong>По умолчанию:</strong> 300 секунд (5 минут)</li> <li><strong>Минимальное:</strong> 10 секунд</li> <li><strong>Максимальное:</strong> 1000000 секунд</li> </ul> </div> <div style="flex: 1; border: 1px solid var(--detail-gray); border-radius: 0.5rem; padding: 15px;"> <h3 style="margin-top: 0;">Как настраивается</h3> <ul> <li>Глобально для всего коммутатора</li> <li>Может различаться для разных VLAN</li> <li>Настройка через CLI (например, <code style="background-color: var(--element-gray)">mac-address-table aging-time 300</code>)</li> </ul> </div> </div><div style="position: relative; display: flex; justify-content: center; flex-direction: column; align-items: center; margin: 20px 0;"> <div class="note"> <strong>Важно:</strong> Слишком короткое время старения увеличивает нагрузку на коммутатор, слишком длинное — может привести к использованию устаревшей информации. <img src="/cat4.svg" style="position: absolute; bottom: 0; right: 0; translate: 50% 50%; transform: rotate(30deg); width: 120px;"> </div> </div><h2 id="mac-aging-performance">Влияние на производительность сети</h2><table> <thead> <tr> <th>Параметр</th> <th>Слишком короткое время</th> <th>Слишком длинное время</th> <th>Оптимальное значение</th> </tr> </thead> <tbody> <tr> <td><strong>Использование CPU</strong></td> <td>Высокое (частые ARP-запросы)</td> <td>Низкое</td> <td>Умеренное</td> </tr> <tr> <td><strong>Flooding-трафик</strong></td> <td>Увеличивается</td> <td>Минимальный</td> <td>Умеренный</td> </tr> <tr> <td><strong>Актуальность таблицы</strong></td> <td>Всегда актуальная</td> <td>Возможны устаревшие записи</td> <td>Баланс</td> </tr> </tbody> </table><div style="position: relative; display: flex; justify-content: center; flex-direction: column; align-items: center; margin: 20px 0;"> <img src="/theory/mac-aging-impact.png" style="width: 60%; border-radius: 0.5rem;"> <div class="note warning"> <strong>Рекомендация:</strong> Для большинства сетей оптимальное значение aging time — 300 секунд. В мобильных сетях (Wi-Fi) можно уменьшить до 60-120 секунд. <img src="/cat4.svg" style="position: absolute; bottom: 0; right: 0; translate: 50% 50%; transform: rotate(30deg); width: 120px;"> </div> </div><style> table { width: 100%; border-collapse: collapse; margin: 15px 0; } th, td { padding: 12px 15px; border: 1px solid var(--detail-gray); text-align: left; } th { background-color: var(--element-gray); font-weight: bold; } tr:nth-child(even) { background-color: var(--element-gray); } .note { border-left: 4px solid var(--highlight-purple); background-color: var(--element-gray); width: 60%; min-height: 60px; border-radius: 0.5rem; padding: 15px; position: relative; margin-top: 15px; } .note.warning { border-left-color: var(--warning-orange); } code { background-color: #f0f0f0; padding: 2px 4px; border-radius: 3px; font-family: monospace; } </style>
